<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TinyLink — Stats</title>
</head>
<body>
  <div id="root">Loading…</div>
  <script>
    const parts = location.pathname.split('/');
    const code = parts[2];
    async function load() {
      const r = await fetch('/api/links/' + code);
      if (r.status === 404) { document.getElementById('root').innerText = 'Not found'; return; }
      const d = await r.json();
      document.getElementById('root').innerHTML = `<h1>Stats for ${d.code}</h1><p>Target: <a href='${d.target_url}'>${d.target_url}</a></p><p>Clicks: ${d.clicks}</p><p>Last clicked: ${d.last_clicked || '—'}</p><p>Created: ${new Date(d.created_at).toLocaleString()}</p>`;
    }
    load();
  </script>
</body>
</html>
